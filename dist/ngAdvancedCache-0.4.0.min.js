(function(n,e){"use strict";function t(){this.$get=function(){function n(n,t){function u(n){var e;return(n.maxAge||d)&&(e=n.maxAge?n.maxAge:d?d:null),e?(new Date).getTime()-n.timestamp>e:!1}function r(n){n!==v&&(s?s===n&&(s=n.n):s=n,a(n.n,n.p),a(n,v),v=n,v.n=null)}function a(n,e){n!==e&&(n&&(n.p=e),e&&(e.n=n))}var o=0,c=e.extend({},t,{id:n}),l={},f=t&&t.capacity||Number.MAX_VALUE,d=t&&t.maxAge||null,m={},v=null,s=null;this.put=function(n,t,i){var u=m[n]||(m[n]={key:n});return r(u),e.isUndefined(t)?undefined:(n in l||o++,l[n]={timestamp:(new Date).getTime(),maxAge:i&&i.maxAge||null,value:t},o>f&&this.remove(s.key),t)},this.get=function(n){var e=m[n];if(e)return u(l[n])?(this.remove(n),undefined):(r(e),l[n].value)},this.remove=function(n){var e=m[n];e&&(e===v&&(v=e.p),e===s&&(s=e.n),a(e.n,e.p),delete m[n],delete l[n],o--)},this.removeAll=function(){l={},o=0,m={},v=s=null},this.destroy=function(){l=null,c=null,m=null,delete i[n]},this.info=function(){return e.extend({},c,{size:o})}}function t(e,t){if(e in i)throw Error("cacheId "+e+" taken");return i[e]=new n(e,t),i[e]}var i={};return t.info=function(){var n={};return e.forEach(i,function(e,t){n[t]=e.info()}),n},t.get=function(n){return i[n]},t}}e.module("ngAdvancedCache",[]),e.module("ngAdvancedCache").provider("$advancedCacheFactory",t)})(window,window.angular);