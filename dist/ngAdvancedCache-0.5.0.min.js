(function(e,t){"use strict";function n(){this.$get=function(){function e(e,n){function a(){var e="";return h.capacity&&(t.isNumber(h.capacity)||(e+="capacity must be a number!;"),0>h.capacity&&(e+="capacity must be greater than zero!;")),e}function u(){var e="";return h.cacheFlushInterval&&(t.isNumber(h.cacheFlushInterval)||(e+="cacheFlushInterval must be a number!;"),0>h.cacheFlushInterval&&(e+="cacheFlushInterval must be greater than zero!;")),e}function i(){var e="";return h.maxAge&&(t.isNumber(h.maxAge)||(e+="maxAge must be a number!;"),0>h.maxAge&&(e+="maxAge must be greater than zero!;")),e}function c(e){e!==f&&(v?v===e&&(v=e.n):v=e,o(e.n,e.p),o(e,f),f=e,f.n=null)}function o(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}var l=0,h=t.extend({},n,{id:e}),m={},s={},f=null,v=null,d="";if(d+=a(h.capacity),d+=i(h.maxAge),d+=u(h.cacheFlushInterval))throw Error(d);h.capacity||(h.capacity=Number.MAX_VALUE),h.cacheFlushInterval&&(h.cacheFlushIntervalId=setInterval(function(){for(var e in m)clearTimeout(m[e].timeoutId);m={},s={},f=null,v=null},h.cacheFlushInterval)),this.put=function(e,n,r){var a=s[e]||(s[e]={key:e}),u=this,o="";if(!t.isString(e))throw Error("The key must be a string!");if(r&&r.maxAge&&(o+=i(r.maxAge)))throw Error(o);return c(a),t.isUndefined(n)?undefined:(e in m||l++,m[e]={value:n},(h.maxAge||r&&r.maxAge)&&(m[e].timestamp=(new Date).getTime(),m[e].timeoutId&&clearTimeout(m[e].timeoutId),m[e].timeoutId=setTimeout(function(){u.remove(e)},r&&r.maxAge||h.maxAge)),l>h.capacity&&this.remove(v.key),n)},this.get=function(e){var t=s[e];if(t)return c(t),m[e].value},this.remove=function(e){var t=s[e];t&&(t===f&&(f=t.p),t===v&&(v=t.n),o(t.n,t.p),delete s[e],delete m[e],l--)},this.removeAll=function(){m={},l=0,s={},f=v=null},this.destroy=function(){clearInterval(h.cacheFlushIntervalId),m=null,h=null,s=null,delete r[e]},this.info=function(){return t.extend({},h,{size:l})}}function n(n,a){if(n in r)throw Error("cacheId "+n+" taken!");if(!t.isString(n))throw Error("cacheId must be a string!");return r[n]=new e(n,a),r[n]}var r={};return n.info=function(){var e={};return t.forEach(r,function(t,n){e[n]=t.info()}),e},n.get=function(e){return r[e]},n}}t.module("ngAdvancedCache",[]),t.module("ngAdvancedCache").provider("$advancedCacheFactory",n)})(window,window.angular);