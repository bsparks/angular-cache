!function(a,b){"use strict";function c(){this.$get=function(){function a(a,c){function e(){var a="";return k.capacity&&(b.isNumber(k.capacity)||(a+="capacity must be a number!;"),k.capacity<0&&(a+="capacity must be greater than zero!;")),a}function f(){var a="";return k.cacheFlushInterval&&(b.isNumber(k.cacheFlushInterval)||(a+="cacheFlushInterval must be a number!;"),k.cacheFlushInterval<0&&(a+="cacheFlushInterval must be greater than zero!;")),a}function g(a){var c="";return a&&(b.isNumber(a)||(c+="maxAge must be a number!;"),0>a&&(c+="maxAge must be greater than zero!;")),c}function h(a){a!==n&&(o?o===a&&(o=a.n):o=a,i(a.n,a.p),i(a,n),n=a,n.n=null)}function i(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}var j=0,k=b.extend({},c,{id:a}),l={},m={},n=null,o=null,p="";if(p+=e(k.capacity),p+=g(k.maxAge),p+=f(k.cacheFlushInterval))throw new Error(p);k.capacity||(k.capacity=Number.MAX_VALUE),k.cacheFlushInterval&&(k.cacheFlushIntervalId=setInterval(function(){for(var a in l)l[a].timeoutId&&clearTimeout(l[a].timeoutId);j=0,l={},m={},n=null,o=null},k.cacheFlushInterval)),this.put=function(a,c,d){var e=m[a]||(m[a]={key:a}),f=this,i="";if(!b.isString(a))throw new Error("The key must be a string!");if(d&&d.maxAge&&(i+=g(d.maxAge)))throw new Error(i);return h(e),b.isUndefined(c)?void 0:(a in l||j++,l[a]={value:c},(k.maxAge||d&&d.maxAge)&&(l[a].timestamp=(new Date).getTime(),l[a].timeoutId&&clearTimeout(l[a].timeoutId),l[a].timeoutId=setTimeout(function(){f.remove(a)},d&&d.maxAge||k.maxAge)),j>k.capacity&&this.remove(o.key),c)},this.get=function(a){var b=m[a];if(b)return h(b),l[a].value},this.remove=function(a){var b=m[a];b&&(b===n&&(n=b.p),b===o&&(o=b.n),i(b.n,b.p),delete m[a],delete l[a],j--)},this.removeAll=function(){l={},j=0,m={},n=o=null},this.destroy=function(){clearInterval(k.cacheFlushIntervalId),l=null,k=null,m=null,delete d[a]},this.info=function(){return b.extend({},k,{size:j})}}function c(c,e){if(c in d)throw new Error("cacheId "+c+" taken!");if(!b.isString(c))throw new Error("cacheId must be a string!");return d[c]=new a(c,e),d[c]}var d={};return c.info=function(){var a={};return b.forEach(d,function(b,c){a[c]=b.info()}),a},c.get=function(a){return d[a]},c.keySet=function(){var a={};for(var b in d)d.hasOwnProperty(b)&&(a[b]=b);return a},c.keys=function(){var a=[];for(var b in d)d.hasOwnProperty(b)&&a.push(b);return a},c}}b.module("angular-cache",[]),b.module("angular-cache").provider("$angularCacheFactory",c)}(window,window.angular);